{"ast":null,"code":"import{useState,useEffect}from\"react\";import\"@/App.css\";import{motion,AnimatePresence}from\"framer-motion\";import{Check,ChevronRight,LogOut,Copy,ArrowLeft,ArrowRight,X}from\"lucide-react\";import{Button}from\"@/components/ui/button\";import{Checkbox}from\"@/components/ui/checkbox\";import{Toaster,toast}from\"sonner\";import contentData from\"@/data/contentData.json\";// Image Lightbox Component\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ImageLightbox=_ref=>{let{images,onClose}=_ref;useEffect(()=>{const handleEsc=e=>{if(e.key==='Escape')onClose();};// Prevent body scroll when lightbox is open\ndocument.body.style.overflow='hidden';window.addEventListener('keydown',handleEsc);return()=>{document.body.style.overflow='auto';window.removeEventListener('keydown',handleEsc);};},[onClose]);return/*#__PURE__*/_jsxs(\"div\",{className:\"fixed inset-0 z-[9999] bg-black/80 flex items-center justify-center\",style:{position:'fixed',top:0,left:0,right:0,bottom:0},onClick:onClose,\"data-testid\":\"image-lightbox\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"absolute top-4 right-4 p-2 bg-white/10 hover:bg-white/20 rounded-full transition-colors z-[10000]\",\"data-testid\":\"lightbox-close\",children:/*#__PURE__*/_jsx(X,{className:\"w-6 h-6 text-white\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-4 items-center justify-center\",onClick:e=>e.stopPropagation(),children:images.map((img,idx)=>/*#__PURE__*/_jsx(\"img\",{src:img.src,alt:img.alt,className:\"max-h-[85vh] object-contain rounded-lg shadow-2xl\",style:{maxWidth:images.length>1?'45vw':'90vw'}},idx))})]});};// Stepper Component\nconst Stepper=_ref2=>{let{currentStep,steps}=_ref2;return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center gap-2 mb-8\",\"data-testid\":\"stepper\",children:steps.map((step,index)=>{const isCompleted=index<currentStep;const isActive=index===currentStep;const stepNumber=index+1;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(motion.div,{initial:{scale:0.8},animate:{scale:1},className:\"\\n                  w-10 h-10 rounded-full flex items-center justify-center text-sm font-semibold\\n                  transition-all duration-300 shadow-sm\\n                  \".concat(isCompleted?'bg-[#0F172A] text-white':'',\"\\n                  \").concat(isActive?'bg-[#FF7870] text-white ring-4 ring-pink-100':'',\"\\n                  \").concat(!isCompleted&&!isActive?'bg-white border-2 border-slate-200 text-slate-400':'',\"\\n                \"),\"data-testid\":\"stepper-step-\".concat(stepNumber),children:isCompleted?/*#__PURE__*/_jsx(Check,{className:\"w-5 h-5\"}):stepNumber}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs mt-2 font-medium \".concat(isActive?'text-[#0F172A]':'text-slate-400'),children:step.label}),/*#__PURE__*/_jsx(\"span\",{className:\"text-[10px] text-slate-400\",children:step.sublabel})]}),index<steps.length-1&&/*#__PURE__*/_jsx(ChevronRight,{className:\"w-4 h-4 mx-3 text-slate-300 mt-[-20px]\"})]},step.id);})});};// Tab Component\nconst TabButton=_ref3=>{let{active,children,onClick,testId}=_ref3;return/*#__PURE__*/_jsx(\"button\",{onClick:onClick,\"data-testid\":testId,className:\"\\n      px-6 py-2.5 rounded-full text-sm font-medium transition-all duration-200\\n      \".concat(active?'bg-[#0F172A] text-white shadow-md':'bg-white text-slate-600 hover:bg-slate-50 border border-slate-200',\"\\n    \"),children:children});};// Copy Button Component\nconst CopyButton=_ref4=>{let{text,label}=_ref4;const handleCopy=async e=>{e.stopPropagation();try{await navigator.clipboard.writeText(text);toast.success(\"\".concat(label||'Text',\" copied!\"));}catch(err){const textArea=document.createElement(\"textarea\");textArea.value=text;textArea.style.position=\"fixed\";textArea.style.left=\"-999999px\";document.body.appendChild(textArea);textArea.focus();textArea.select();try{document.execCommand(\"copy\");toast.success(\"\".concat(label||'Text',\" copied!\"));}catch(e){toast.error(\"Could not copy\");}document.body.removeChild(textArea);}};return/*#__PURE__*/_jsx(\"button\",{onClick:handleCopy,className:\"p-1.5 hover:bg-slate-100 rounded-md transition-colors\",\"data-testid\":\"copy-\".concat((label===null||label===void 0?void 0:label.toLowerCase().replace(/\\s+/g,'-'))||'text'),children:/*#__PURE__*/_jsx(Copy,{className:\"w-4 h-4 text-slate-400 hover:text-slate-600\"})});};// Visual Style Step\nconst VisualStyleStep=_ref5=>{let{visualStyles,selectedStyle,onSelect,onImageClick}=_ref5;return/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:\"animate-fadeIn\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-center mb-2 text-[#0F172A]\",children:\"Choose Your Visual Style\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-500 text-center mb-8\",children:\"Select a visual style that matches your content theme\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl border border-slate-100 shadow-xl shadow-slate-200/50 overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-[60px_1fr_2fr] bg-[#0F172A] text-white text-xs font-bold uppercase tracking-wider\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-3\",children:\"Select\"}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-3\",children:\"Images\"}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-3\",children:\"Info\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"divide-y divide-slate-50\",children:visualStyles.map(style=>/*#__PURE__*/_jsxs(motion.div,{whileHover:{backgroundColor:'rgba(255, 120, 112, 0.05)'},className:\"grid grid-cols-[60px_1fr_2fr] items-center cursor-pointer transition-colors \".concat((selectedStyle===null||selectedStyle===void 0?void 0:selectedStyle.id)===style.id?'bg-pink-50/50':''),onClick:()=>onSelect(style),\"data-testid\":\"visual-style-\".concat(style.id),children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-4 flex justify-center\",children:/*#__PURE__*/_jsx(Checkbox,{checked:(selectedStyle===null||selectedStyle===void 0?void 0:selectedStyle.id)===style.id,onCheckedChange:()=>onSelect(style),\"data-testid\":\"visual-style-checkbox-\".concat(style.id)})}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-sm text-[#0F172A] mb-2\",children:style.title}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-3\",children:style.images.map((img,idx)=>/*#__PURE__*/_jsx(\"img\",{src:img,alt:\"\".concat(style.title,\" preview \").concat(idx+1),className:\"w-44 h-56 object-cover rounded-lg border border-slate-200 cursor-zoom-in hover:border-[#FF7870] hover:shadow-md transition-all\",onClick:e=>{e.stopPropagation();// Pass all images for this style\nonImageClick(style.images.map((imgUrl,i)=>({src:imgUrl,alt:\"\".concat(style.title,\" preview \").concat(i+1)})));},\"data-testid\":\"image-\".concat(style.id,\"-\").concat(idx)},idx))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-4\",children:style.info&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-500 italic\",children:style.info})})]},style.id))})]})]});};// Hook Step\nconst HookStep=_ref6=>{var _selectedStyle$title;let{hooks,selectedHook,onSelect,selectedStyle}=_ref6;// Check if selected style is a \"Mistakes\" style\nconst isMistakeStyle=selectedStyle===null||selectedStyle===void 0?void 0:(_selectedStyle$title=selectedStyle.title)===null||_selectedStyle$title===void 0?void 0:_selectedStyle$title.toLowerCase().includes('mistake');// Different categories based on style type\nconst regularCategories=[\"Ex TikTok\",\"Professor\",\"Official TikTok\",\"Experienced\",\"Journalist\",\"New TikTok Algorithm\",\"Learnings\",\"AI Tips\"];const mistakeCategories=[\"Ex TikTok - Mistakes\",\"Professor - Mistakes\",\"Official TikTok - Mistakes\",\"Experienced - Mistakes\",\"Learnings - Mistakes\"];const categories=isMistakeStyle?mistakeCategories:regularCategories;const displayCategories=isMistakeStyle?[\"Ex TikTok\",\"Professor\",\"Official TikTok\",\"Experienced\",\"Learnings\"]:regularCategories;const[activeCategory,setActiveCategory]=useState(categories[0]);// Update active category when style changes\nuseEffect(()=>{const newCategories=isMistakeStyle?[\"Ex TikTok - Mistakes\",\"Professor - Mistakes\",\"Official TikTok - Mistakes\",\"Experienced - Mistakes\",\"Learnings - Mistakes\"]:[\"Ex TikTok\",\"Professor\",\"Official TikTok\",\"Experienced\",\"Journalist\",\"New TikTok Algorithm\",\"Learnings\",\"AI Tips\"];setActiveCategory(newCategories[0]);},[isMistakeStyle]);const filteredHooks=hooks.filter(h=>h.category===activeCategory);const handleCategoryClick=(displayCat,idx)=>{if(isMistakeStyle){setActiveCategory(mistakeCategories[idx]);}else{setActiveCategory(displayCat);}};return/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-center mb-2 text-[#0F172A]\",children:\"Choose Your Hook\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-500 text-center mb-2\",children:\"Select a hook that will grab your audience's attention\"}),selectedStyle&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-[#FF7870] text-center text-sm mb-6\",children:[\"Showing only \",isMistakeStyle?'Mistake':selectedStyle.title.replace(':',''),\" hooks based on your visual style selection\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2 justify-center mb-6\",children:displayCategories.map((cat,idx)=>/*#__PURE__*/_jsx(TabButton,{active:isMistakeStyle?activeCategory===mistakeCategories[idx]:activeCategory===cat,onClick:()=>handleCategoryClick(cat,idx),testId:\"hook-tab-\".concat(cat.toLowerCase().replace(/\\s+/g,'-')),children:cat},cat))}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl border border-slate-100 shadow-xl shadow-slate-200/50 overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-[60px_80px_1fr_150px_100px] bg-[#0F172A] text-white text-xs font-bold uppercase tracking-wider\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-3\",children:\"Select\"}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-3\",children:\"Rank\"}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-3\",children:\"Idea\"}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-3\",children:\"Reference Links\"}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-3\",children:\"Notes\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"divide-y divide-slate-50\",children:filteredHooks.map(hook=>/*#__PURE__*/_jsxs(motion.div,{whileHover:{backgroundColor:'rgba(255, 120, 112, 0.05)'},className:\"grid grid-cols-[60px_80px_1fr_150px_100px] items-center cursor-pointer transition-colors \".concat((selectedHook===null||selectedHook===void 0?void 0:selectedHook.id)===hook.id?'bg-pink-50/50':''),onClick:()=>onSelect(hook),\"data-testid\":\"hook-\".concat(hook.id),children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-4 flex justify-center\",children:/*#__PURE__*/_jsx(Checkbox,{checked:(selectedHook===null||selectedHook===void 0?void 0:selectedHook.id)===hook.id,onCheckedChange:()=>onSelect(hook),\"data-testid\":\"hook-checkbox-\".concat(hook.id)})}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-4 text-sm text-slate-500\",children:hook.rank||'-'}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-4 text-sm text-[#0F172A]\",children:hook.idea}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-4 text-sm text-slate-500\",children:hook.reference_links&&hook.reference_links!=='-'?/*#__PURE__*/_jsx(\"a\",{href:hook.reference_links,target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-[#FF7870] hover:underline truncate block max-w-[130px]\",children:\"View\"}):'-'}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-4 text-sm text-slate-500\",children:hook.notes||'-'})]},hook.id))})]})]});};// Script Step\nconst ScriptStep=_ref7=>{var _selectedStyle$title2,_selectedScripts$6,_selectedScripts$7,_selectedScripts$8,_selectedScripts$9;let{scripts,selectedScripts,onSelect,currentScriptIndex,setCurrentScriptIndex,selectedStyle}=_ref7;// Check if selected style is a \"Mistakes\" style\nconst isMistakeStyle=selectedStyle===null||selectedStyle===void 0?void 0:(_selectedStyle$title2=selectedStyle.title)===null||_selectedStyle$title2===void 0?void 0:_selectedStyle$title2.toLowerCase().includes('mistake');// Determine which tab should be active based on current script index and previous selections\nconst getDefaultTab=index=>{if(index===3)return\"viral_plug\";// Script 4 must be Viral Plug\nif(index===0)return\"choice\";// Script 1: user chooses between other and engagement\nif(index===1){var _selectedScripts$;// Script 2: show the opposite of what was chosen in Script 1\nconst script1Type=(_selectedScripts$=selectedScripts[0])===null||_selectedScripts$===void 0?void 0:_selectedScripts$.type;return script1Type===\"engagement\"?\"other\":\"engagement\";}if(index===2)return\"other\";// Script 3: other scripts\nif(index===4)return\"other\";// Script 5: other scripts\nreturn\"other\";};const[activeTab,setActiveTab]=useState(\"other\");// Update tab when currentScriptIndex changes\nuseEffect(()=>{// Determine which tab should be active based on current script index\nif(currentScriptIndex===3){setActiveTab(\"viral_plug\");}else if(currentScriptIndex===0){setActiveTab(\"other\");// Default for script 1\n}else if(currentScriptIndex===1){var _selectedScripts$2;// Script 2: show the opposite of what was chosen in Script 1\nconst script1Type=(_selectedScripts$2=selectedScripts[0])===null||_selectedScripts$2===void 0?void 0:_selectedScripts$2.type;setActiveTab(script1Type===\"engagement\"?\"other\":\"engagement\");}else if(currentScriptIndex===2||currentScriptIndex===4){setActiveTab(\"other\");}},[currentScriptIndex,selectedScripts]);// Get filtered scripts based on active tab and style type\nconst getFilteredScripts=()=>{// For Mistake styles, Script 1 shows mistake_engagement\nif(isMistakeStyle&&currentScriptIndex===0){return scripts.filter(s=>s.type===\"mistake_engagement\");}// For Mistake styles, Scripts 2, 3, 5 show mistake scripts\nif(isMistakeStyle&&(currentScriptIndex===1||currentScriptIndex===2||currentScriptIndex===4)){return scripts.filter(s=>s.type===\"mistake\");}// For Mistake styles, Script 4 shows mistake_viral\nif(isMistakeStyle&&currentScriptIndex===3){return scripts.filter(s=>s.type===\"mistake_viral\");}return scripts.filter(s=>s.type===activeTab);};const filteredScripts=getFilteredScripts();// Get the type label for a script position\nconst getScriptTypeLabel=(index,script)=>{if(index===3){return(script===null||script===void 0?void 0:script.type)===\"mistake_viral\"?\"Mistake Viral Plug\":\"Viral Plug\";}if((script===null||script===void 0?void 0:script.type)===\"engagement\")return\"Engagement Trigger\";if((script===null||script===void 0?void 0:script.type)===\"mistake_engagement\")return\"Mistake Engagement\";if((script===null||script===void 0?void 0:script.type)===\"mistake\")return\"Mistake Script\";if((script===null||script===void 0?void 0:script.type)===\"mistake_viral\")return\"Mistake Viral Plug\";return\"Other Script\";};// Get the subtitle for current script\nconst getScriptSubtitle=()=>{if(isMistakeStyle){if(currentScriptIndex===0)return\"Mistake Engagement Triggers (Mistake Style)\";if(currentScriptIndex===1)return\"Mistake Scripts\";if(currentScriptIndex===2)return\"Mistake Scripts\";if(currentScriptIndex===3)return\"Mistake Viral Plug (Mistake Style)\";if(currentScriptIndex===4)return\"Mistake Scripts\";}if(currentScriptIndex===0)return\"Choose: Other Scripts OR Engagement Triggers\";if(currentScriptIndex===1){var _selectedScripts$3;const script1Type=(_selectedScripts$3=selectedScripts[0])===null||_selectedScripts$3===void 0?void 0:_selectedScripts$3.type;return script1Type===\"engagement\"?\"Other Scripts (auto-selected)\":\"Engagement Triggers (auto-selected)\";}if(currentScriptIndex===2)return\"Other Scripts\";if(currentScriptIndex===3)return\"Viral Plug Required\";if(currentScriptIndex===4)return\"Other Scripts\";return\"\";};// Check if a script can be selected for current position\nconst canSelectScript=script=>{// Check if already selected\nconst isSelected=selectedScripts.some(s=>(s===null||s===void 0?void 0:s.id)===script.id);if(isSelected)return false;// Script 4: For Mistake styles use mistake_viral, otherwise viral_plug\nif(currentScriptIndex===3){return isMistakeStyle?script.type===\"mistake_viral\":script.type===\"viral_plug\";}// Mistake viral only for Script 4 in Mistake styles\nif(script.type===\"mistake_viral\"){return isMistakeStyle&&currentScriptIndex===3;}// Viral plug only for Script 4 in normal styles\nif(script.type===\"viral_plug\"){return!isMistakeStyle&&currentScriptIndex===3;}// For Mistake styles, Script 1 uses mistake_engagement, others use mistake\nif(isMistakeStyle&&currentScriptIndex===0){return script.type===\"mistake_engagement\";}if(isMistakeStyle&&(currentScriptIndex===1||currentScriptIndex===2||currentScriptIndex===4)){return script.type===\"mistake\";}// Script 1: can choose either other or engagement\nif(currentScriptIndex===0){return script.type===\"other\"||script.type===\"engagement\";}// Script 2: must be opposite of script 1\nif(currentScriptIndex===1){var _selectedScripts$4;const script1Type=(_selectedScripts$4=selectedScripts[0])===null||_selectedScripts$4===void 0?void 0:_selectedScripts$4.type;return script.type!==script1Type;}// Script 3 and 5: only other scripts (engagement already used in script 1 or 2)\nif(currentScriptIndex===2||currentScriptIndex===4){return script.type===\"other\";}return true;};// Get disabled reason for a script\nconst getDisabledReason=script=>{if(selectedScripts.some(s=>(s===null||s===void 0?void 0:s.id)===script.id)){return\"Already selected\";}if(isMistakeStyle&&currentScriptIndex===0&&script.type!==\"mistake_engagement\"){return\"Mistake style requires Mistake Engagement Triggers\";}if(isMistakeStyle&&(currentScriptIndex===1||currentScriptIndex===2||currentScriptIndex===4)&&script.type!==\"mistake\"){return\"Mistake style requires Mistake Scripts\";}if(currentScriptIndex===1){var _selectedScripts$5;const script1Type=(_selectedScripts$5=selectedScripts[0])===null||_selectedScripts$5===void 0?void 0:_selectedScripts$5.type;if(script.type===script1Type){return\"Script 1 already selected \".concat(script1Type===\"engagement\"?\"Engagement Trigger\":\"Other Script\");}}if(currentScriptIndex===2||currentScriptIndex===4){if(script.type===\"engagement\"){return\"Engagement Trigger already used\";}}return\"\";};const handleRemoveScript=index=>{onSelect(undefined,index,true);setCurrentScriptIndex(index);};// Get available types for Script 1 choice buttons\nconst getAvailableTypesForScript1=()=>{return[{type:\"other\",label:\"Other Scripts\"},{type:\"engagement\",label:\"Engagement Triggers\"}];};return/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-center mb-2 text-[#0F172A]\",children:\"Choose Your 5 Scripts\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-500 text-center mb-2\",children:isMistakeStyle?\"Mistake Style: Script 1 = Mistake Engagement • Scripts 2,3,5 = Mistake Scripts • Script 4 = Mistake Viral Plug\":\"Script 1: Choose type • Script 2: Auto-filled opposite • Script 4: Viral Plug • Scripts 3 & 5: Other Scripts\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl border border-slate-100 shadow-lg p-6 mb-8\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-semibold text-center text-slate-600 mb-4\",children:\"Script Selection Progress\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center gap-2\",children:[0,1,2,3,4].map(idx=>{const script=selectedScripts[idx];const isActive=idx===currentScriptIndex;const isCompleted=script!==undefined;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center min-w-[80px]\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"\\n                      w-8 h-8 rounded-full flex items-center justify-center text-xs font-semibold cursor-pointer\\n                      \".concat(isCompleted?'bg-[#0F172A] text-white':'',\"\\n                      \").concat(isActive&&!isCompleted?'bg-[#FF7870] text-white':'',\"\\n                      \").concat(!isActive&&!isCompleted?'bg-white border-2 border-slate-200 text-slate-400':'',\"\\n                    \"),onClick:()=>!isCompleted&&setCurrentScriptIndex(idx),children:isCompleted?/*#__PURE__*/_jsx(Check,{className:\"w-4 h-4\"}):idx+1}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-[10px] mt-1 font-medium text-slate-700\",children:[\"Script \",idx+1]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-[9px] text-slate-400 text-center\",children:getScriptTypeLabel(idx,script)}),isCompleted&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRemoveScript(idx),className:\"text-[10px] text-[#FF7870] hover:underline mt-1 font-medium\",\"data-testid\":\"remove-script-\".concat(idx),children:\"Remove\"})]}),idx<4&&/*#__PURE__*/_jsx(ChevronRight,{className:\"w-3 h-3 mx-1 text-slate-300\"})]},idx);})})]}),/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold mb-2 text-[#0F172A]\",children:[\"Select Script \",currentScriptIndex+1]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-500 mb-4\",children:getScriptSubtitle()}),currentScriptIndex===0&&/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-2 mb-6\",children:isMistakeStyle?/*#__PURE__*/_jsx(TabButton,{active:true,onClick:()=>{},testId:\"scripts-tab-mistake-engagement\",children:\"Mistake Engagement\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TabButton,{active:activeTab===\"other\"||((_selectedScripts$6=selectedScripts[0])===null||_selectedScripts$6===void 0?void 0:_selectedScripts$6.type)===\"other\",onClick:()=>setActiveTab(\"other\"),testId:\"scripts-tab-other\",children:\"Other Scripts\"}),/*#__PURE__*/_jsx(TabButton,{active:activeTab===\"engagement\"||((_selectedScripts$7=selectedScripts[0])===null||_selectedScripts$7===void 0?void 0:_selectedScripts$7.type)===\"engagement\",onClick:()=>setActiveTab(\"engagement\"),testId:\"scripts-tab-engagement\",children:\"Engagement Triggers\"})]})}),currentScriptIndex===1&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 p-3 bg-blue-50 rounded-lg border border-blue-100\",children:isMistakeStyle?/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-blue-700\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:\"Mistake Style Selected\"}),/*#__PURE__*/_jsx(\"br\",{}),\"Script 1: Mistake Engagement | Scripts 2,3,5: Mistake Scripts | Script 4: Mistake Viral Plug\"]}):/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-blue-700\",children:[\"Script 1 selected: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:((_selectedScripts$8=selectedScripts[0])===null||_selectedScripts$8===void 0?void 0:_selectedScripts$8.type)===\"engagement\"?\"Engagement Trigger\":\"Other Script\"}),/*#__PURE__*/_jsx(\"br\",{}),\"Script 2 must be: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:((_selectedScripts$9=selectedScripts[0])===null||_selectedScripts$9===void 0?void 0:_selectedScripts$9.type)===\"engagement\"?\"Other Script\":\"Engagement Trigger\"})]})}),currentScriptIndex===3&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(TabButton,{active:true,onClick:()=>{},testId:isMistakeStyle?\"scripts-tab-mistake-viral\":\"scripts-tab-viral-plug\",children:isMistakeStyle?\"Mistake Viral Plug Scripts\":\"Viral Plug Scripts\"})}),(currentScriptIndex===2||currentScriptIndex===4)&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(TabButton,{active:true,onClick:()=>{},testId:isMistakeStyle?\"scripts-tab-mistake\":\"scripts-tab-other\",children:isMistakeStyle?\"Mistake Scripts\":\"Other Scripts\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl border border-slate-100 shadow-xl shadow-slate-200/50 overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-[60px_80px_200px_1fr_100px] bg-[#0F172A] text-white text-xs font-bold uppercase tracking-wider\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-3\",children:\"Select\"}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-3\",children:\"Rank\"}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-3\",children:\"Paragraph 1\"}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-3\",children:\"Paragraph 2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-3\",children:\"Notes\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"divide-y divide-slate-50 max-h-[500px] overflow-y-auto\",children:filteredScripts.map(script=>{const isSelected=selectedScripts.some(s=>(s===null||s===void 0?void 0:s.id)===script.id);const canSelect=canSelectScript(script);const disabledReason=getDisabledReason(script);return/*#__PURE__*/_jsxs(motion.div,{whileHover:{backgroundColor:canSelect?'rgba(255, 120, 112, 0.05)':undefined},className:\"grid grid-cols-[60px_80px_200px_1fr_100px] items-start cursor-pointer transition-colors \".concat(isSelected?'bg-emerald-50/50 opacity-50':'',\" \").concat(!canSelect?'opacity-40 cursor-not-allowed':''),onClick:()=>canSelect&&onSelect(script,currentScriptIndex),\"data-testid\":\"script-\".concat(script.id),title:disabledReason,children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-4 flex justify-center\",children:/*#__PURE__*/_jsx(Checkbox,{checked:isSelected,disabled:!canSelect,onCheckedChange:()=>canSelect&&onSelect(script,currentScriptIndex),\"data-testid\":\"script-checkbox-\".concat(script.id)})}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-4 text-sm text-slate-500\",children:script.rank||'-'}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-4 text-sm text-[#0F172A] font-medium\",children:script.paragraph1}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-4 text-sm text-slate-600\",children:script.paragraph2}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-4 text-sm text-slate-500\",children:isSelected?/*#__PURE__*/_jsx(\"span\",{className:\"text-emerald-600 font-medium\",children:\"Selected\"}):disabledReason?/*#__PURE__*/_jsx(\"span\",{className:\"text-slate-400 italic\",title:disabledReason,children:\"Unavailable\"}):script.notes||'-'})]},script.id);})})]}),selectedScripts[currentScriptIndex]&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:\"mt-4 selection-bar\",children:[/*#__PURE__*/_jsx(Check,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Script \",currentScriptIndex+1,\": \",selectedScripts[currentScriptIndex].paragraph1.substring(0,50),\"...\"]})]})]});};// Summary Step - Improved Layout\nconst SummaryStep=_ref8=>{let{selectedStyle,selectedHook,selectedScripts,onBackToEdit}=_ref8;return/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-center mb-2 text-[#0F172A]\",children:\"Content Summary\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-500 text-center mb-8\",children:\"Review your selections and copy each item for your content creation\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl border border-slate-100 shadow-lg p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-semibold text-slate-500 uppercase tracking-wider mb-4\",children:\"Visual Style\"}),selectedStyle?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-[#0F172A] mb-3\",children:selectedStyle.title}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-3\",children:selectedStyle.images.map((img,idx)=>/*#__PURE__*/_jsx(\"img\",{src:img,alt:\"\".concat(selectedStyle.title,\" preview \").concat(idx+1),className:\"w-20 h-20 object-cover rounded-lg border border-slate-200\"},idx))})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-400\",children:\"No style selected\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl border border-slate-100 shadow-lg p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-semibold text-slate-500 uppercase tracking-wider mb-4\",children:\"Hook\"}),selectedHook?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between gap-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-[#0F172A] flex-1\",children:selectedHook.idea}),/*#__PURE__*/_jsx(CopyButton,{text:selectedHook.idea,label:\"Hook\"})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-400\",children:\"No hook selected\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl border border-slate-100 shadow-lg p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-semibold text-slate-500 uppercase tracking-wider mb-6\",children:\"Scripts\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:selectedScripts.map((script,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"border border-slate-100 rounded-xl p-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-4\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-lg font-bold text-[#0F172A]\",children:[\"Script \",idx+1]}),/*#__PURE__*/_jsxs(\"span\",{className:\"px-3 py-1 bg-[#0F172A] text-white text-xs font-medium rounded-full\",children:[\"Position \",idx+1]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-slate-400\",children:\"Rank: -\"})]}),script?/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-slate-500\",children:\"Paragraph 1:\"}),/*#__PURE__*/_jsx(CopyButton,{text:script.paragraph1,label:\"Script \".concat(idx+1,\" P1\")})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-slate-50 rounded-lg p-4\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-[#0F172A]\",children:script.paragraph1})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-slate-500\",children:\"Paragraph 2:\"}),/*#__PURE__*/_jsx(CopyButton,{text:script.paragraph2,label:\"Script \".concat(idx+1,\" P2\")})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-slate-50 rounded-lg p-4\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-[#0F172A]\",children:script.paragraph2})})]})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-400 text-sm\",children:\"Not selected\"})]},idx))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center pt-4\",children:/*#__PURE__*/_jsxs(Button,{variant:\"outline\",onClick:onBackToEdit,className:\"rounded-full px-8 py-6 font-medium border-slate-200 hover:bg-slate-50\",\"data-testid\":\"back-to-edit-btn\",children:[/*#__PURE__*/_jsx(ArrowLeft,{className:\"w-4 h-4 mr-2\"}),\"Back to Edit\"]})})]})]});};// Main Content Creator Component\nconst ContentCreator=()=>{const[currentStep,setCurrentStep]=useState(0);const[visualStyles,setVisualStyles]=useState([]);const[hooks,setHooks]=useState([]);const[scripts,setScripts]=useState([]);const[selectedStyle,setSelectedStyle]=useState(null);const[selectedHook,setSelectedHook]=useState(null);const[selectedScripts,setSelectedScripts]=useState([undefined,undefined,undefined,undefined,undefined]);const[currentScriptIndex,setCurrentScriptIndex]=useState(0);const[lastUpdated]=useState(new Date().toLocaleString('de-DE'));const[lightboxImage,setLightboxImage]=useState(null);const steps=[{id:1,label:\"Visual Style\",sublabel:\"Choose your style\"},{id:2,label:\"Hook\",sublabel:\"Select your hook\"},{id:3,label:\"Scripts\",sublabel:\"Pick 5 scripts\"},{id:4,label:\"Summary\",sublabel:\"Review & copy\"}];useEffect(()=>{// Load data from local JSON file\nsetVisualStyles(contentData.visualStyles);setHooks(contentData.hooks);setScripts(contentData.scripts);},[]);const handleScriptSelect=function(script,index){let remove=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(remove){const newScripts=[...selectedScripts];newScripts[index]=undefined;setSelectedScripts(newScripts);setCurrentScriptIndex(index);return;}const newScripts=[...selectedScripts];newScripts[index]=script;setSelectedScripts(newScripts);// Move to next empty slot\nconst nextEmpty=newScripts.findIndex((s,i)=>i>index&&s===undefined);if(nextEmpty!==-1){setCurrentScriptIndex(nextEmpty);}else{// Find first empty slot\nconst firstEmpty=newScripts.findIndex(s=>s===undefined);if(firstEmpty!==-1){setCurrentScriptIndex(firstEmpty);}}};const canProceed=()=>{switch(currentStep){case 0:return selectedStyle!==null;case 1:return selectedHook!==null;case 2:return selectedScripts.filter(s=>s!==undefined).length===5;default:return true;}};const handleNext=()=>{if(canProceed()&&currentStep<steps.length-1){setCurrentStep(currentStep+1);}};const handleBack=()=>{if(currentStep>0){setCurrentStep(currentStep-1);}};const handleBackToEdit=()=>{setCurrentStep(0);};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen\",\"data-testid\":\"content-creator\",children:[/*#__PURE__*/_jsx(Toaster,{position:\"top-right\"}),lightboxImage&&/*#__PURE__*/_jsx(ImageLightbox,{images:lightboxImage,onClose:()=>setLightboxImage(null)}),/*#__PURE__*/_jsx(\"header\",{className:\"bg-white/80 backdrop-blur-md border-b border-slate-100 sticky top-0 z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-[#FF7870] rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-bold text-lg\",children:\"V\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-[#0F172A] text-lg\",children:\"She's Viral\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-slate-500\",children:[\"Welcome, \",/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-[#0F172A]\",children:\"johansimon\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"flex items-center gap-2 text-[#FF7870] hover:text-[#E66A63] text-sm font-medium\",\"data-testid\":\"sign-out-btn\",children:[/*#__PURE__*/_jsx(LogOut,{className:\"w-4 h-4\"}),\"Sign Out\"]})]})]})}),/*#__PURE__*/_jsxs(\"main\",{className:\"max-w-6xl mx-auto px-6 py-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-[#0F172A]\",children:\"Content Dashboard\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-slate-500 text-sm\",children:[\"Last updated: \",lastUpdated]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-3xl border border-slate-100 shadow-2xl shadow-slate-200/50 p-8 md:p-12\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-center mb-8 text-[#0F172A]\",children:\"Content Creator\"}),/*#__PURE__*/_jsx(Stepper,{currentStep:currentStep,steps:steps}),/*#__PURE__*/_jsxs(AnimatePresence,{mode:\"wait\",children:[currentStep===0&&/*#__PURE__*/_jsx(VisualStyleStep,{visualStyles:visualStyles,selectedStyle:selectedStyle,onSelect:setSelectedStyle,onImageClick:setLightboxImage},\"visual\"),currentStep===1&&/*#__PURE__*/_jsx(HookStep,{hooks:hooks,selectedHook:selectedHook,onSelect:setSelectedHook,selectedStyle:selectedStyle},\"hook\"),currentStep===2&&/*#__PURE__*/_jsx(ScriptStep,{scripts:scripts,selectedScripts:selectedScripts,onSelect:handleScriptSelect,currentScriptIndex:currentScriptIndex,setCurrentScriptIndex:setCurrentScriptIndex,selectedStyle:selectedStyle},\"scripts\"),currentStep===3&&/*#__PURE__*/_jsx(SummaryStep,{selectedStyle:selectedStyle,selectedHook:selectedHook,selectedScripts:selectedScripts,onBackToEdit:handleBackToEdit},\"summary\")]})]}),currentStep<3&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-md border-t border-slate-100 py-4 px-6 z-40\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-6xl mx-auto flex justify-between\",children:[/*#__PURE__*/_jsxs(Button,{variant:\"outline\",onClick:handleBack,disabled:currentStep===0,className:\"rounded-full px-8 py-6 font-medium border-slate-200 hover:bg-slate-50\",\"data-testid\":\"back-btn\",children:[/*#__PURE__*/_jsx(ArrowLeft,{className:\"w-4 h-4 mr-2\"}),\"Back\"]}),/*#__PURE__*/_jsxs(Button,{onClick:handleNext,disabled:!canProceed(),className:\"rounded-full px-8 py-6 font-medium \".concat(canProceed()?'bg-[#FF7870] hover:bg-[#E66A63] text-white shadow-lg shadow-pink-200':'bg-slate-100 text-slate-400'),\"data-testid\":\"next-btn\",children:[\"Next\",/*#__PURE__*/_jsx(ArrowRight,{className:\"w-4 h-4 ml-2\"})]})]})}),currentStep<3&&/*#__PURE__*/_jsx(\"div\",{className:\"h-24\"})]})]});};function App(){return/*#__PURE__*/_jsx(ContentCreator,{});}export default App;","map":{"version":3,"names":["useState","useEffect","motion","AnimatePresence","Check","ChevronRight","LogOut","Copy","ArrowLeft","ArrowRight","X","Button","Checkbox","Toaster","toast","contentData","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ImageLightbox","_ref","images","onClose","handleEsc","e","key","document","body","style","overflow","window","addEventListener","removeEventListener","className","position","top","left","right","bottom","onClick","children","stopPropagation","map","img","idx","src","alt","maxWidth","length","Stepper","_ref2","currentStep","steps","step","index","isCompleted","isActive","stepNumber","div","initial","scale","animate","concat","label","sublabel","id","TabButton","_ref3","active","testId","CopyButton","_ref4","text","handleCopy","navigator","clipboard","writeText","success","err","textArea","createElement","value","appendChild","focus","select","execCommand","error","removeChild","toLowerCase","replace","VisualStyleStep","_ref5","visualStyles","selectedStyle","onSelect","onImageClick","opacity","y","exit","whileHover","backgroundColor","checked","onCheckedChange","title","imgUrl","i","info","HookStep","_ref6","_selectedStyle$title","hooks","selectedHook","isMistakeStyle","includes","regularCategories","mistakeCategories","categories","displayCategories","activeCategory","setActiveCategory","newCategories","filteredHooks","filter","h","category","handleCategoryClick","displayCat","cat","hook","rank","idea","reference_links","href","target","rel","notes","ScriptStep","_ref7","_selectedStyle$title2","_selectedScripts$6","_selectedScripts$7","_selectedScripts$8","_selectedScripts$9","scripts","selectedScripts","currentScriptIndex","setCurrentScriptIndex","getDefaultTab","_selectedScripts$","script1Type","type","activeTab","setActiveTab","_selectedScripts$2","getFilteredScripts","s","filteredScripts","getScriptTypeLabel","script","getScriptSubtitle","_selectedScripts$3","canSelectScript","isSelected","some","_selectedScripts$4","getDisabledReason","_selectedScripts$5","handleRemoveScript","undefined","getAvailableTypesForScript1","canSelect","disabledReason","disabled","paragraph1","paragraph2","substring","SummaryStep","_ref8","onBackToEdit","variant","ContentCreator","setCurrentStep","setVisualStyles","setHooks","setScripts","setSelectedStyle","setSelectedHook","setSelectedScripts","lastUpdated","Date","toLocaleString","lightboxImage","setLightboxImage","handleScriptSelect","remove","arguments","newScripts","nextEmpty","findIndex","firstEmpty","canProceed","handleNext","handleBack","handleBackToEdit","mode","App"],"sources":["/Users/artemi/Entwicklung/Developer/ShesViralTool-main/frontend/src/App.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport \"@/App.css\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { Check, ChevronRight, LogOut, Copy, ArrowLeft, ArrowRight, X } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Toaster, toast } from \"sonner\";\nimport contentData from \"@/data/contentData.json\";\n\n// Image Lightbox Component\nconst ImageLightbox = ({ images, onClose }) => {\n  useEffect(() => {\n    const handleEsc = (e) => {\n      if (e.key === 'Escape') onClose();\n    };\n    // Prevent body scroll when lightbox is open\n    document.body.style.overflow = 'hidden';\n    window.addEventListener('keydown', handleEsc);\n    return () => {\n      document.body.style.overflow = 'auto';\n      window.removeEventListener('keydown', handleEsc);\n    };\n  }, [onClose]);\n\n  return (\n    <div\n      className=\"fixed inset-0 z-[9999] bg-black/80 flex items-center justify-center\"\n      style={{ position: 'fixed', top: 0, left: 0, right: 0, bottom: 0 }}\n      onClick={onClose}\n      data-testid=\"image-lightbox\"\n    >\n      <button\n        onClick={onClose}\n        className=\"absolute top-4 right-4 p-2 bg-white/10 hover:bg-white/20 rounded-full transition-colors z-[10000]\"\n        data-testid=\"lightbox-close\"\n      >\n        <X className=\"w-6 h-6 text-white\" />\n      </button>\n      <div className=\"flex gap-4 items-center justify-center\" onClick={(e) => e.stopPropagation()}>\n        {images.map((img, idx) => (\n          <img\n            key={idx}\n            src={img.src}\n            alt={img.alt}\n            className=\"max-h-[85vh] object-contain rounded-lg shadow-2xl\"\n            style={{ maxWidth: images.length > 1 ? '45vw' : '90vw' }}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n\n// Stepper Component\nconst Stepper = ({ currentStep, steps }) => {\n  return (\n    <div className=\"flex items-center justify-center gap-2 mb-8\" data-testid=\"stepper\">\n      {steps.map((step, index) => {\n        const isCompleted = index < currentStep;\n        const isActive = index === currentStep;\n        const stepNumber = index + 1;\n\n        return (\n          <div key={step.id} className=\"flex items-center\">\n            <div className=\"flex flex-col items-center\">\n              <motion.div\n                initial={{ scale: 0.8 }}\n                animate={{ scale: 1 }}\n                className={`\n                  w-10 h-10 rounded-full flex items-center justify-center text-sm font-semibold\n                  transition-all duration-300 shadow-sm\n                  ${isCompleted ? 'bg-[#0F172A] text-white' : ''}\n                  ${isActive ? 'bg-[#FF7870] text-white ring-4 ring-pink-100' : ''}\n                  ${!isCompleted && !isActive ? 'bg-white border-2 border-slate-200 text-slate-400' : ''}\n                `}\n                data-testid={`stepper-step-${stepNumber}`}\n              >\n                {isCompleted ? <Check className=\"w-5 h-5\" /> : stepNumber}\n              </motion.div>\n              <span className={`text-xs mt-2 font-medium ${isActive ? 'text-[#0F172A]' : 'text-slate-400'}`}>\n                {step.label}\n              </span>\n              <span className=\"text-[10px] text-slate-400\">{step.sublabel}</span>\n            </div>\n            {index < steps.length - 1 && (\n              <ChevronRight className=\"w-4 h-4 mx-3 text-slate-300 mt-[-20px]\" />\n            )}\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\n// Tab Component\nconst TabButton = ({ active, children, onClick, testId }) => (\n  <button\n    onClick={onClick}\n    data-testid={testId}\n    className={`\n      px-6 py-2.5 rounded-full text-sm font-medium transition-all duration-200\n      ${active \n        ? 'bg-[#0F172A] text-white shadow-md' \n        : 'bg-white text-slate-600 hover:bg-slate-50 border border-slate-200'\n      }\n    `}\n  >\n    {children}\n  </button>\n);\n\n// Copy Button Component\nconst CopyButton = ({ text, label }) => {\n  const handleCopy = async (e) => {\n    e.stopPropagation();\n    try {\n      await navigator.clipboard.writeText(text);\n      toast.success(`${label || 'Text'} copied!`);\n    } catch (err) {\n      const textArea = document.createElement(\"textarea\");\n      textArea.value = text;\n      textArea.style.position = \"fixed\";\n      textArea.style.left = \"-999999px\";\n      document.body.appendChild(textArea);\n      textArea.focus();\n      textArea.select();\n      try {\n        document.execCommand(\"copy\");\n        toast.success(`${label || 'Text'} copied!`);\n      } catch (e) {\n        toast.error(\"Could not copy\");\n      }\n      document.body.removeChild(textArea);\n    }\n  };\n\n  return (\n    <button\n      onClick={handleCopy}\n      className=\"p-1.5 hover:bg-slate-100 rounded-md transition-colors\"\n      data-testid={`copy-${label?.toLowerCase().replace(/\\s+/g, '-') || 'text'}`}\n    >\n      <Copy className=\"w-4 h-4 text-slate-400 hover:text-slate-600\" />\n    </button>\n  );\n};\n\n// Visual Style Step\nconst VisualStyleStep = ({ visualStyles, selectedStyle, onSelect, onImageClick }) => {\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      exit={{ opacity: 0, y: -20 }}\n      className=\"animate-fadeIn\"\n    >\n      <h2 className=\"text-2xl font-bold text-center mb-2 text-[#0F172A]\">Choose Your Visual Style</h2>\n      <p className=\"text-slate-500 text-center mb-8\">Select a visual style that matches your content theme</p>\n      \n      <div className=\"bg-white rounded-2xl border border-slate-100 shadow-xl shadow-slate-200/50 overflow-hidden\">\n        <div className=\"grid grid-cols-[60px_1fr_2fr] bg-[#0F172A] text-white text-xs font-bold uppercase tracking-wider\">\n          <div className=\"px-4 py-3\">Select</div>\n          <div className=\"px-4 py-3\">Images</div>\n          <div className=\"px-4 py-3\">Info</div>\n        </div>\n        \n        <div className=\"divide-y divide-slate-50\">\n          {visualStyles.map((style) => (\n            <motion.div\n              key={style.id}\n              whileHover={{ backgroundColor: 'rgba(255, 120, 112, 0.05)' }}\n              className={`grid grid-cols-[60px_1fr_2fr] items-center cursor-pointer transition-colors ${\n                selectedStyle?.id === style.id ? 'bg-pink-50/50' : ''\n              }`}\n              onClick={() => onSelect(style)}\n              data-testid={`visual-style-${style.id}`}\n            >\n              <div className=\"px-4 py-4 flex justify-center\">\n                <Checkbox \n                  checked={selectedStyle?.id === style.id}\n                  onCheckedChange={() => onSelect(style)}\n                  data-testid={`visual-style-checkbox-${style.id}`}\n                />\n              </div>\n              <div className=\"px-4 py-4\">\n                <p className=\"font-semibold text-sm text-[#0F172A] mb-2\">{style.title}</p>\n                <div className=\"flex gap-3\">\n                  {style.images.map((img, idx) => (\n                    <img\n                      key={idx}\n                      src={img}\n                      alt={`${style.title} preview ${idx + 1}`}\n                      className=\"w-44 h-56 object-cover rounded-lg border border-slate-200 cursor-zoom-in hover:border-[#FF7870] hover:shadow-md transition-all\"\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        // Pass all images for this style\n                        onImageClick(style.images.map((imgUrl, i) => ({ \n                          src: imgUrl, \n                          alt: `${style.title} preview ${i + 1}` \n                        })));\n                      }}\n                      data-testid={`image-${style.id}-${idx}`}\n                    />\n                  ))}\n                </div>\n              </div>\n              <div className=\"px-4 py-4\">\n                {style.info && (\n                  <p className=\"text-sm text-slate-500 italic\">{style.info}</p>\n                )}\n              </div>\n            </motion.div>\n          ))}\n        </div>\n      </div>\n    </motion.div>\n  );\n};\n\n// Hook Step\nconst HookStep = ({ hooks, selectedHook, onSelect, selectedStyle }) => {\n  // Check if selected style is a \"Mistakes\" style\n  const isMistakeStyle = selectedStyle?.title?.toLowerCase().includes('mistake');\n  \n  // Different categories based on style type\n  const regularCategories = [\"Ex TikTok\", \"Professor\", \"Official TikTok\", \"Experienced\", \"Journalist\", \"New TikTok Algorithm\", \"Learnings\", \"AI Tips\"];\n  const mistakeCategories = [\"Ex TikTok - Mistakes\", \"Professor - Mistakes\", \"Official TikTok - Mistakes\", \"Experienced - Mistakes\", \"Learnings - Mistakes\"];\n  \n  const categories = isMistakeStyle ? mistakeCategories : regularCategories;\n  const displayCategories = isMistakeStyle \n    ? [\"Ex TikTok\", \"Professor\", \"Official TikTok\", \"Experienced\", \"Learnings\"]\n    : regularCategories;\n  \n  const [activeCategory, setActiveCategory] = useState(categories[0]);\n  \n  // Update active category when style changes\n  useEffect(() => {\n    const newCategories = isMistakeStyle \n      ? [\"Ex TikTok - Mistakes\", \"Professor - Mistakes\", \"Official TikTok - Mistakes\", \"Experienced - Mistakes\", \"Learnings - Mistakes\"]\n      : [\"Ex TikTok\", \"Professor\", \"Official TikTok\", \"Experienced\", \"Journalist\", \"New TikTok Algorithm\", \"Learnings\", \"AI Tips\"];\n    setActiveCategory(newCategories[0]);\n  }, [isMistakeStyle]);\n  \n  const filteredHooks = hooks.filter(h => h.category === activeCategory);\n\n  const handleCategoryClick = (displayCat, idx) => {\n    if (isMistakeStyle) {\n      setActiveCategory(mistakeCategories[idx]);\n    } else {\n      setActiveCategory(displayCat);\n    }\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      exit={{ opacity: 0, y: -20 }}\n    >\n      <h2 className=\"text-2xl font-bold text-center mb-2 text-[#0F172A]\">Choose Your Hook</h2>\n      <p className=\"text-slate-500 text-center mb-2\">Select a hook that will grab your audience's attention</p>\n      {selectedStyle && (\n        <p className=\"text-[#FF7870] text-center text-sm mb-6\">\n          Showing only {isMistakeStyle ? 'Mistake' : selectedStyle.title.replace(':', '')} hooks based on your visual style selection\n        </p>\n      )}\n      \n      <div className=\"flex flex-wrap gap-2 justify-center mb-6\">\n        {displayCategories.map((cat, idx) => (\n          <TabButton\n            key={cat}\n            active={isMistakeStyle ? activeCategory === mistakeCategories[idx] : activeCategory === cat}\n            onClick={() => handleCategoryClick(cat, idx)}\n            testId={`hook-tab-${cat.toLowerCase().replace(/\\s+/g, '-')}`}\n          >\n            {cat}\n          </TabButton>\n        ))}\n      </div>\n\n      <div className=\"bg-white rounded-2xl border border-slate-100 shadow-xl shadow-slate-200/50 overflow-hidden\">\n        <div className=\"grid grid-cols-[60px_80px_1fr_150px_100px] bg-[#0F172A] text-white text-xs font-bold uppercase tracking-wider\">\n          <div className=\"px-4 py-3\">Select</div>\n          <div className=\"px-4 py-3\">Rank</div>\n          <div className=\"px-4 py-3\">Idea</div>\n          <div className=\"px-4 py-3\">Reference Links</div>\n          <div className=\"px-4 py-3\">Notes</div>\n        </div>\n        \n        <div className=\"divide-y divide-slate-50\">\n          {filteredHooks.map((hook) => (\n            <motion.div\n              key={hook.id}\n              whileHover={{ backgroundColor: 'rgba(255, 120, 112, 0.05)' }}\n              className={`grid grid-cols-[60px_80px_1fr_150px_100px] items-center cursor-pointer transition-colors ${\n                selectedHook?.id === hook.id ? 'bg-pink-50/50' : ''\n              }`}\n              onClick={() => onSelect(hook)}\n              data-testid={`hook-${hook.id}`}\n            >\n              <div className=\"px-4 py-4 flex justify-center\">\n                <Checkbox \n                  checked={selectedHook?.id === hook.id}\n                  onCheckedChange={() => onSelect(hook)}\n                  data-testid={`hook-checkbox-${hook.id}`}\n                />\n              </div>\n              <div className=\"px-4 py-4 text-sm text-slate-500\">\n                {hook.rank || '-'}\n              </div>\n              <div className=\"px-4 py-4 text-sm text-[#0F172A]\">\n                {hook.idea}\n              </div>\n              <div className=\"px-4 py-4 text-sm text-slate-500\">\n                {hook.reference_links && hook.reference_links !== '-' ? (\n                  <a href={hook.reference_links} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-[#FF7870] hover:underline truncate block max-w-[130px]\">\n                    View\n                  </a>\n                ) : '-'}\n              </div>\n              <div className=\"px-4 py-4 text-sm text-slate-500\">\n                {hook.notes || '-'}\n              </div>\n            </motion.div>\n          ))}\n        </div>\n      </div>\n    </motion.div>\n  );\n};\n\n// Script Step\nconst ScriptStep = ({ scripts, selectedScripts, onSelect, currentScriptIndex, setCurrentScriptIndex, selectedStyle }) => {\n  // Check if selected style is a \"Mistakes\" style\n  const isMistakeStyle = selectedStyle?.title?.toLowerCase().includes('mistake');\n  \n  // Determine which tab should be active based on current script index and previous selections\n  const getDefaultTab = (index) => {\n    if (index === 3) return \"viral_plug\"; // Script 4 must be Viral Plug\n    if (index === 0) return \"choice\"; // Script 1: user chooses between other and engagement\n    if (index === 1) {\n      // Script 2: show the opposite of what was chosen in Script 1\n      const script1Type = selectedScripts[0]?.type;\n      return script1Type === \"engagement\" ? \"other\" : \"engagement\";\n    }\n    if (index === 2) return \"other\"; // Script 3: other scripts\n    if (index === 4) return \"other\"; // Script 5: other scripts\n    return \"other\";\n  };\n  \n  const [activeTab, setActiveTab] = useState(\"other\");\n  \n  // Update tab when currentScriptIndex changes\n  useEffect(() => {\n    // Determine which tab should be active based on current script index\n    if (currentScriptIndex === 3) {\n      setActiveTab(\"viral_plug\");\n    } else if (currentScriptIndex === 0) {\n      setActiveTab(\"other\"); // Default for script 1\n    } else if (currentScriptIndex === 1) {\n      // Script 2: show the opposite of what was chosen in Script 1\n      const script1Type = selectedScripts[0]?.type;\n      setActiveTab(script1Type === \"engagement\" ? \"other\" : \"engagement\");\n    } else if (currentScriptIndex === 2 || currentScriptIndex === 4) {\n      setActiveTab(\"other\");\n    }\n  }, [currentScriptIndex, selectedScripts]);\n  \n  // Get filtered scripts based on active tab and style type\n  const getFilteredScripts = () => {\n    // For Mistake styles, Script 1 shows mistake_engagement\n    if (isMistakeStyle && currentScriptIndex === 0) {\n      return scripts.filter(s => s.type === \"mistake_engagement\");\n    }\n    // For Mistake styles, Scripts 2, 3, 5 show mistake scripts\n    if (isMistakeStyle && (currentScriptIndex === 1 || currentScriptIndex === 2 || currentScriptIndex === 4)) {\n      return scripts.filter(s => s.type === \"mistake\");\n    }\n    // For Mistake styles, Script 4 shows mistake_viral\n    if (isMistakeStyle && currentScriptIndex === 3) {\n      return scripts.filter(s => s.type === \"mistake_viral\");\n    }\n    return scripts.filter(s => s.type === activeTab);\n  };\n  \n  const filteredScripts = getFilteredScripts();\n  \n  // Get the type label for a script position\n  const getScriptTypeLabel = (index, script) => {\n    if (index === 3) {\n      return script?.type === \"mistake_viral\" ? \"Mistake Viral Plug\" : \"Viral Plug\";\n    }\n    if (script?.type === \"engagement\") return \"Engagement Trigger\";\n    if (script?.type === \"mistake_engagement\") return \"Mistake Engagement\";\n    if (script?.type === \"mistake\") return \"Mistake Script\";\n    if (script?.type === \"mistake_viral\") return \"Mistake Viral Plug\";\n    return \"Other Script\";\n  };\n\n  // Get the subtitle for current script\n  const getScriptSubtitle = () => {\n    if (isMistakeStyle) {\n      if (currentScriptIndex === 0) return \"Mistake Engagement Triggers (Mistake Style)\";\n      if (currentScriptIndex === 1) return \"Mistake Scripts\";\n      if (currentScriptIndex === 2) return \"Mistake Scripts\";\n      if (currentScriptIndex === 3) return \"Mistake Viral Plug (Mistake Style)\";\n      if (currentScriptIndex === 4) return \"Mistake Scripts\";\n    }\n    if (currentScriptIndex === 0) return \"Choose: Other Scripts OR Engagement Triggers\";\n    if (currentScriptIndex === 1) {\n      const script1Type = selectedScripts[0]?.type;\n      return script1Type === \"engagement\" ? \"Other Scripts (auto-selected)\" : \"Engagement Triggers (auto-selected)\";\n    }\n    if (currentScriptIndex === 2) return \"Other Scripts\";\n    if (currentScriptIndex === 3) return \"Viral Plug Required\";\n    if (currentScriptIndex === 4) return \"Other Scripts\";\n    return \"\";\n  };\n\n  // Check if a script can be selected for current position\n  const canSelectScript = (script) => {\n    // Check if already selected\n    const isSelected = selectedScripts.some(s => s?.id === script.id);\n    if (isSelected) return false;\n    \n    // Script 4: For Mistake styles use mistake_viral, otherwise viral_plug\n    if (currentScriptIndex === 3) {\n      return isMistakeStyle ? script.type === \"mistake_viral\" : script.type === \"viral_plug\";\n    }\n    // Mistake viral only for Script 4 in Mistake styles\n    if (script.type === \"mistake_viral\") {\n      return isMistakeStyle && currentScriptIndex === 3;\n    }\n    // Viral plug only for Script 4 in normal styles\n    if (script.type === \"viral_plug\") {\n      return !isMistakeStyle && currentScriptIndex === 3;\n    }\n    \n    // For Mistake styles, Script 1 uses mistake_engagement, others use mistake\n    if (isMistakeStyle && currentScriptIndex === 0) {\n      return script.type === \"mistake_engagement\";\n    }\n    if (isMistakeStyle && (currentScriptIndex === 1 || currentScriptIndex === 2 || currentScriptIndex === 4)) {\n      return script.type === \"mistake\";\n    }\n    \n    // Script 1: can choose either other or engagement\n    if (currentScriptIndex === 0) {\n      return script.type === \"other\" || script.type === \"engagement\";\n    }\n    \n    // Script 2: must be opposite of script 1\n    if (currentScriptIndex === 1) {\n      const script1Type = selectedScripts[0]?.type;\n      return script.type !== script1Type;\n    }\n    \n    // Script 3 and 5: only other scripts (engagement already used in script 1 or 2)\n    if (currentScriptIndex === 2 || currentScriptIndex === 4) {\n      return script.type === \"other\";\n    }\n    \n    return true;\n  };\n\n  // Get disabled reason for a script\n  const getDisabledReason = (script) => {\n    if (selectedScripts.some(s => s?.id === script.id)) {\n      return \"Already selected\";\n    }\n    if (isMistakeStyle && currentScriptIndex === 0 && script.type !== \"mistake_engagement\") {\n      return \"Mistake style requires Mistake Engagement Triggers\";\n    }\n    if (isMistakeStyle && (currentScriptIndex === 1 || currentScriptIndex === 2 || currentScriptIndex === 4) && script.type !== \"mistake\") {\n      return \"Mistake style requires Mistake Scripts\";\n    }\n    if (currentScriptIndex === 1) {\n      const script1Type = selectedScripts[0]?.type;\n      if (script.type === script1Type) {\n        return `Script 1 already selected ${script1Type === \"engagement\" ? \"Engagement Trigger\" : \"Other Script\"}`;\n      }\n    }\n    if (currentScriptIndex === 2 || currentScriptIndex === 4) {\n      if (script.type === \"engagement\") {\n        return \"Engagement Trigger already used\";\n      }\n    }\n    return \"\";\n  };\n\n  const handleRemoveScript = (index) => {\n    onSelect(undefined, index, true);\n    setCurrentScriptIndex(index);\n  };\n\n  // Get available types for Script 1 choice buttons\n  const getAvailableTypesForScript1 = () => {\n    return [\n      { type: \"other\", label: \"Other Scripts\" },\n      { type: \"engagement\", label: \"Engagement Triggers\" }\n    ];\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      exit={{ opacity: 0, y: -20 }}\n    >\n      <h2 className=\"text-2xl font-bold text-center mb-2 text-[#0F172A]\">Choose Your 5 Scripts</h2>\n      <p className=\"text-slate-500 text-center mb-2\">\n        {isMistakeStyle \n          ? \"Mistake Style: Script 1 = Mistake Engagement • Scripts 2,3,5 = Mistake Scripts • Script 4 = Mistake Viral Plug\"\n          : \"Script 1: Choose type • Script 2: Auto-filled opposite • Script 4: Viral Plug • Scripts 3 & 5: Other Scripts\"}\n      </p>\n      \n      {/* Script Selection Progress */}\n      <div className=\"bg-white rounded-2xl border border-slate-100 shadow-lg p-6 mb-8\">\n        <h3 className=\"text-sm font-semibold text-center text-slate-600 mb-4\">Script Selection Progress</h3>\n        <div className=\"flex items-center justify-center gap-2\">\n          {[0, 1, 2, 3, 4].map((idx) => {\n            const script = selectedScripts[idx];\n            const isActive = idx === currentScriptIndex;\n            const isCompleted = script !== undefined;\n            \n            return (\n              <div key={idx} className=\"flex items-center\">\n                <div className=\"flex flex-col items-center min-w-[80px]\">\n                  <div\n                    className={`\n                      w-8 h-8 rounded-full flex items-center justify-center text-xs font-semibold cursor-pointer\n                      ${isCompleted ? 'bg-[#0F172A] text-white' : ''}\n                      ${isActive && !isCompleted ? 'bg-[#FF7870] text-white' : ''}\n                      ${!isActive && !isCompleted ? 'bg-white border-2 border-slate-200 text-slate-400' : ''}\n                    `}\n                    onClick={() => !isCompleted && setCurrentScriptIndex(idx)}\n                  >\n                    {isCompleted ? <Check className=\"w-4 h-4\" /> : idx + 1}\n                  </div>\n                  <span className=\"text-[10px] mt-1 font-medium text-slate-700\">Script {idx + 1}</span>\n                  <span className=\"text-[9px] text-slate-400 text-center\">\n                    {getScriptTypeLabel(idx, script)}\n                  </span>\n                  {isCompleted && (\n                    <button\n                      onClick={() => handleRemoveScript(idx)}\n                      className=\"text-[10px] text-[#FF7870] hover:underline mt-1 font-medium\"\n                      data-testid={`remove-script-${idx}`}\n                    >\n                      Remove\n                    </button>\n                  )}\n                </div>\n                {idx < 4 && <ChevronRight className=\"w-3 h-3 mx-1 text-slate-300\" />}\n              </div>\n            );\n          })}\n        </div>\n      </div>\n\n      <h3 className=\"text-lg font-semibold mb-2 text-[#0F172A]\">\n        Select Script {currentScriptIndex + 1}\n      </h3>\n      <p className=\"text-sm text-slate-500 mb-4\">{getScriptSubtitle()}</p>\n      \n      {/* Tab Buttons - Only show for Script 1 */}\n      {currentScriptIndex === 0 && (\n        <div className=\"flex gap-2 mb-6\">\n          {isMistakeStyle ? (\n            <TabButton\n              active={true}\n              onClick={() => {}}\n              testId=\"scripts-tab-mistake-engagement\"\n            >\n              Mistake Engagement\n            </TabButton>\n          ) : (\n            <>\n              <TabButton\n                active={activeTab === \"other\" || selectedScripts[0]?.type === \"other\"}\n                onClick={() => setActiveTab(\"other\")}\n                testId=\"scripts-tab-other\"\n              >\n                Other Scripts\n              </TabButton>\n              <TabButton\n                active={activeTab === \"engagement\" || selectedScripts[0]?.type === \"engagement\"}\n                onClick={() => setActiveTab(\"engagement\")}\n                testId=\"scripts-tab-engagement\"\n              >\n                Engagement Triggers\n              </TabButton>\n            </>\n          )}\n        </div>\n      )}\n\n      {/* For Script 2, show what type is being auto-selected */}\n      {currentScriptIndex === 1 && (\n        <div className=\"mb-4 p-3 bg-blue-50 rounded-lg border border-blue-100\">\n          {isMistakeStyle ? (\n            <p className=\"text-sm text-blue-700\">\n              <span className=\"font-semibold\">Mistake Style Selected</span>\n              <br />\n              Script 1: Mistake Engagement | Scripts 2,3,5: Mistake Scripts | Script 4: Mistake Viral Plug\n            </p>\n          ) : (\n            <p className=\"text-sm text-blue-700\">\n              Script 1 selected: <span className=\"font-semibold\">{selectedScripts[0]?.type === \"engagement\" ? \"Engagement Trigger\" : \"Other Script\"}</span>\n              <br />\n              Script 2 must be: <span className=\"font-semibold\">{selectedScripts[0]?.type === \"engagement\" ? \"Other Script\" : \"Engagement Trigger\"}</span>\n            </p>\n          )}\n        </div>\n      )}\n\n      {/* For Script 4, show viral plug label */}\n      {currentScriptIndex === 3 && (\n        <div className=\"mb-4\">\n          <TabButton\n            active={true}\n            onClick={() => {}}\n            testId={isMistakeStyle ? \"scripts-tab-mistake-viral\" : \"scripts-tab-viral-plug\"}\n          >\n            {isMistakeStyle ? \"Mistake Viral Plug Scripts\" : \"Viral Plug Scripts\"}\n          </TabButton>\n        </div>\n      )}\n\n      {/* For Scripts 3 and 5, show other scripts label */}\n      {(currentScriptIndex === 2 || currentScriptIndex === 4) && (\n        <div className=\"mb-4\">\n          <TabButton\n            active={true}\n            onClick={() => {}}\n            testId={isMistakeStyle ? \"scripts-tab-mistake\" : \"scripts-tab-other\"}\n          >\n            {isMistakeStyle ? \"Mistake Scripts\" : \"Other Scripts\"}\n          </TabButton>\n        </div>\n      )}\n\n      <div className=\"bg-white rounded-2xl border border-slate-100 shadow-xl shadow-slate-200/50 overflow-hidden\">\n        <div className=\"grid grid-cols-[60px_80px_200px_1fr_100px] bg-[#0F172A] text-white text-xs font-bold uppercase tracking-wider\">\n          <div className=\"px-4 py-3\">Select</div>\n          <div className=\"px-4 py-3\">Rank</div>\n          <div className=\"px-4 py-3\">Paragraph 1</div>\n          <div className=\"px-4 py-3\">Paragraph 2</div>\n          <div className=\"px-4 py-3\">Notes</div>\n        </div>\n        \n        <div className=\"divide-y divide-slate-50 max-h-[500px] overflow-y-auto\">\n          {filteredScripts.map((script) => {\n            const isSelected = selectedScripts.some(s => s?.id === script.id);\n            const canSelect = canSelectScript(script);\n            const disabledReason = getDisabledReason(script);\n            \n            return (\n              <motion.div\n                key={script.id}\n                whileHover={{ backgroundColor: canSelect ? 'rgba(255, 120, 112, 0.05)' : undefined }}\n                className={`grid grid-cols-[60px_80px_200px_1fr_100px] items-start cursor-pointer transition-colors ${\n                  isSelected ? 'bg-emerald-50/50 opacity-50' : ''\n                } ${!canSelect ? 'opacity-40 cursor-not-allowed' : ''}`}\n                onClick={() => canSelect && onSelect(script, currentScriptIndex)}\n                data-testid={`script-${script.id}`}\n                title={disabledReason}\n              >\n                <div className=\"px-4 py-4 flex justify-center\">\n                  <Checkbox \n                    checked={isSelected}\n                    disabled={!canSelect}\n                    onCheckedChange={() => canSelect && onSelect(script, currentScriptIndex)}\n                    data-testid={`script-checkbox-${script.id}`}\n                  />\n                </div>\n                <div className=\"px-4 py-4 text-sm text-slate-500\">\n                  {script.rank || '-'}\n                </div>\n                <div className=\"px-4 py-4 text-sm text-[#0F172A] font-medium\">\n                  {script.paragraph1}\n                </div>\n                <div className=\"px-4 py-4 text-sm text-slate-600\">\n                  {script.paragraph2}\n                </div>\n                <div className=\"px-4 py-4 text-sm text-slate-500\">\n                  {isSelected ? (\n                    <span className=\"text-emerald-600 font-medium\">Selected</span>\n                  ) : disabledReason ? (\n                    <span className=\"text-slate-400 italic\" title={disabledReason}>Unavailable</span>\n                  ) : (\n                    script.notes || '-'\n                  )}\n                </div>\n              </motion.div>\n            );\n          })}\n        </div>\n      </div>\n      \n      {/* Selection indicator */}\n      {selectedScripts[currentScriptIndex] && (\n        <motion.div\n          initial={{ opacity: 0, y: 10 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"mt-4 selection-bar\"\n        >\n          <Check className=\"w-4 h-4\" />\n          <span>Script {currentScriptIndex + 1}: {selectedScripts[currentScriptIndex].paragraph1.substring(0, 50)}...</span>\n        </motion.div>\n      )}\n    </motion.div>\n  );\n};\n\n// Summary Step - Improved Layout\nconst SummaryStep = ({ selectedStyle, selectedHook, selectedScripts, onBackToEdit }) => {\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      exit={{ opacity: 0, y: -20 }}\n    >\n      <h2 className=\"text-2xl font-bold text-center mb-2 text-[#0F172A]\">Content Summary</h2>\n      <p className=\"text-slate-500 text-center mb-8\">Review your selections and copy each item for your content creation</p>\n      \n      <div className=\"space-y-6\">\n        {/* Visual Style Summary */}\n        <div className=\"bg-white rounded-2xl border border-slate-100 shadow-lg p-6\">\n          <h3 className=\"text-sm font-semibold text-slate-500 uppercase tracking-wider mb-4\">Visual Style</h3>\n          {selectedStyle ? (\n            <div>\n              <p className=\"font-semibold text-[#0F172A] mb-3\">{selectedStyle.title}</p>\n              <div className=\"flex gap-3\">\n                {selectedStyle.images.map((img, idx) => (\n                  <img\n                    key={idx}\n                    src={img}\n                    alt={`${selectedStyle.title} preview ${idx + 1}`}\n                    className=\"w-20 h-20 object-cover rounded-lg border border-slate-200\"\n                  />\n                ))}\n              </div>\n            </div>\n          ) : (\n            <p className=\"text-slate-400\">No style selected</p>\n          )}\n        </div>\n\n        {/* Hook Summary */}\n        <div className=\"bg-white rounded-2xl border border-slate-100 shadow-lg p-6\">\n          <h3 className=\"text-sm font-semibold text-slate-500 uppercase tracking-wider mb-4\">Hook</h3>\n          {selectedHook ? (\n            <div className=\"flex items-start justify-between gap-4\">\n              <p className=\"text-[#0F172A] flex-1\">{selectedHook.idea}</p>\n              <CopyButton text={selectedHook.idea} label=\"Hook\" />\n            </div>\n          ) : (\n            <p className=\"text-slate-400\">No hook selected</p>\n          )}\n        </div>\n\n        {/* Scripts Summary - Detailed Layout */}\n        <div className=\"bg-white rounded-2xl border border-slate-100 shadow-lg p-6\">\n          <h3 className=\"text-sm font-semibold text-slate-500 uppercase tracking-wider mb-6\">Scripts</h3>\n          <div className=\"space-y-6\">\n            {selectedScripts.map((script, idx) => (\n              <div key={idx} className=\"border border-slate-100 rounded-xl p-5\">\n                <div className=\"flex items-center gap-3 mb-4\">\n                  <span className=\"text-lg font-bold text-[#0F172A]\">Script {idx + 1}</span>\n                  <span className=\"px-3 py-1 bg-[#0F172A] text-white text-xs font-medium rounded-full\">\n                    Position {idx + 1}\n                  </span>\n                  <span className=\"text-sm text-slate-400\">Rank: -</span>\n                </div>\n                \n                {script ? (\n                  <div className=\"grid grid-cols-2 gap-6\">\n                    <div>\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <span className=\"text-sm font-medium text-slate-500\">Paragraph 1:</span>\n                        <CopyButton text={script.paragraph1} label={`Script ${idx + 1} P1`} />\n                      </div>\n                      <div className=\"bg-slate-50 rounded-lg p-4\">\n                        <p className=\"text-sm text-[#0F172A]\">{script.paragraph1}</p>\n                      </div>\n                    </div>\n                    <div>\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <span className=\"text-sm font-medium text-slate-500\">Paragraph 2:</span>\n                        <CopyButton text={script.paragraph2} label={`Script ${idx + 1} P2`} />\n                      </div>\n                      <div className=\"bg-slate-50 rounded-lg p-4\">\n                        <p className=\"text-sm text-[#0F172A]\">{script.paragraph2}</p>\n                      </div>\n                    </div>\n                  </div>\n                ) : (\n                  <p className=\"text-slate-400 text-sm\">Not selected</p>\n                )}\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Back to Edit Button */}\n        <div className=\"flex justify-center pt-4\">\n          <Button\n            variant=\"outline\"\n            onClick={onBackToEdit}\n            className=\"rounded-full px-8 py-6 font-medium border-slate-200 hover:bg-slate-50\"\n            data-testid=\"back-to-edit-btn\"\n          >\n            <ArrowLeft className=\"w-4 h-4 mr-2\" />\n            Back to Edit\n          </Button>\n        </div>\n      </div>\n    </motion.div>\n  );\n};\n\n// Main Content Creator Component\nconst ContentCreator = () => {\n  const [currentStep, setCurrentStep] = useState(0);\n  const [visualStyles, setVisualStyles] = useState([]);\n  const [hooks, setHooks] = useState([]);\n  const [scripts, setScripts] = useState([]);\n  const [selectedStyle, setSelectedStyle] = useState(null);\n  const [selectedHook, setSelectedHook] = useState(null);\n  const [selectedScripts, setSelectedScripts] = useState([undefined, undefined, undefined, undefined, undefined]);\n  const [currentScriptIndex, setCurrentScriptIndex] = useState(0);\n  const [lastUpdated] = useState(new Date().toLocaleString('de-DE'));\n  const [lightboxImage, setLightboxImage] = useState(null);\n\n  const steps = [\n    { id: 1, label: \"Visual Style\", sublabel: \"Choose your style\" },\n    { id: 2, label: \"Hook\", sublabel: \"Select your hook\" },\n    { id: 3, label: \"Scripts\", sublabel: \"Pick 5 scripts\" },\n    { id: 4, label: \"Summary\", sublabel: \"Review & copy\" }\n  ];\n\n  useEffect(() => {\n    // Load data from local JSON file\n    setVisualStyles(contentData.visualStyles);\n    setHooks(contentData.hooks);\n    setScripts(contentData.scripts);\n  }, []);\n\n  const handleScriptSelect = (script, index, remove = false) => {\n    if (remove) {\n      const newScripts = [...selectedScripts];\n      newScripts[index] = undefined;\n      setSelectedScripts(newScripts);\n      setCurrentScriptIndex(index);\n      return;\n    }\n\n    const newScripts = [...selectedScripts];\n    newScripts[index] = script;\n    setSelectedScripts(newScripts);\n    \n    // Move to next empty slot\n    const nextEmpty = newScripts.findIndex((s, i) => i > index && s === undefined);\n    if (nextEmpty !== -1) {\n      setCurrentScriptIndex(nextEmpty);\n    } else {\n      // Find first empty slot\n      const firstEmpty = newScripts.findIndex(s => s === undefined);\n      if (firstEmpty !== -1) {\n        setCurrentScriptIndex(firstEmpty);\n      }\n    }\n  };\n\n  const canProceed = () => {\n    switch (currentStep) {\n      case 0: return selectedStyle !== null;\n      case 1: return selectedHook !== null;\n      case 2: return selectedScripts.filter(s => s !== undefined).length === 5;\n      default: return true;\n    }\n  };\n\n  const handleNext = () => {\n    if (canProceed() && currentStep < steps.length - 1) {\n      setCurrentStep(currentStep + 1);\n    }\n  };\n\n  const handleBack = () => {\n    if (currentStep > 0) {\n      setCurrentStep(currentStep - 1);\n    }\n  };\n\n  const handleBackToEdit = () => {\n    setCurrentStep(0);\n  };\n\n  return (\n    <div className=\"min-h-screen\" data-testid=\"content-creator\">\n      <Toaster position=\"top-right\" />\n      \n      {/* Global Lightbox */}\n      {lightboxImage && (\n        <ImageLightbox\n          images={lightboxImage}\n          onClose={() => setLightboxImage(null)}\n        />\n      )}\n      \n      {/* Header */}\n      <header className=\"bg-white/80 backdrop-blur-md border-b border-slate-100 sticky top-0 z-50\">\n        <div className=\"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-8 h-8 bg-[#FF7870] rounded-lg flex items-center justify-center\">\n              <span className=\"text-white font-bold text-lg\">V</span>\n            </div>\n            <span className=\"font-semibold text-[#0F172A] text-lg\">She's Viral</span>\n          </div>\n          <div className=\"flex items-center gap-4\">\n            <span className=\"text-sm text-slate-500\">Welcome, <span className=\"font-medium text-[#0F172A]\">johansimon</span></span>\n            <button className=\"flex items-center gap-2 text-[#FF7870] hover:text-[#E66A63] text-sm font-medium\" data-testid=\"sign-out-btn\">\n              <LogOut className=\"w-4 h-4\" />\n              Sign Out\n            </button>\n          </div>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <main className=\"max-w-6xl mx-auto px-6 py-8\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-[#0F172A]\">Content Dashboard</h1>\n          <p className=\"text-slate-500 text-sm\">Last updated: {lastUpdated}</p>\n        </div>\n\n        {/* Content Creator Card */}\n        <div className=\"bg-white rounded-3xl border border-slate-100 shadow-2xl shadow-slate-200/50 p-8 md:p-12\">\n          <h2 className=\"text-2xl font-bold text-center mb-8 text-[#0F172A]\">Content Creator</h2>\n          \n          <Stepper currentStep={currentStep} steps={steps} />\n          \n          <AnimatePresence mode=\"wait\">\n            {currentStep === 0 && (\n              <VisualStyleStep\n                key=\"visual\"\n                visualStyles={visualStyles}\n                selectedStyle={selectedStyle}\n                onSelect={setSelectedStyle}\n                onImageClick={setLightboxImage}\n              />\n            )}\n            {currentStep === 1 && (\n              <HookStep\n                key=\"hook\"\n                hooks={hooks}\n                selectedHook={selectedHook}\n                onSelect={setSelectedHook}\n                selectedStyle={selectedStyle}\n              />\n            )}\n            {currentStep === 2 && (\n              <ScriptStep\n                key=\"scripts\"\n                scripts={scripts}\n                selectedScripts={selectedScripts}\n                onSelect={handleScriptSelect}\n                currentScriptIndex={currentScriptIndex}\n                setCurrentScriptIndex={setCurrentScriptIndex}\n                selectedStyle={selectedStyle}\n              />\n            )}\n            {currentStep === 3 && (\n              <SummaryStep\n                key=\"summary\"\n                selectedStyle={selectedStyle}\n                selectedHook={selectedHook}\n                selectedScripts={selectedScripts}\n                onBackToEdit={handleBackToEdit}\n              />\n            )}\n          </AnimatePresence>\n        </div>\n\n        {/* Navigation Buttons - Fixed at bottom */}\n        {currentStep < 3 && (\n          <div className=\"fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-md border-t border-slate-100 py-4 px-6 z-40\">\n            <div className=\"max-w-6xl mx-auto flex justify-between\">\n              <Button\n                variant=\"outline\"\n                onClick={handleBack}\n                disabled={currentStep === 0}\n                className=\"rounded-full px-8 py-6 font-medium border-slate-200 hover:bg-slate-50\"\n                data-testid=\"back-btn\"\n              >\n                <ArrowLeft className=\"w-4 h-4 mr-2\" />\n                Back\n              </Button>\n              \n              <Button\n                onClick={handleNext}\n                disabled={!canProceed()}\n                className={`rounded-full px-8 py-6 font-medium ${\n                  canProceed() \n                    ? 'bg-[#FF7870] hover:bg-[#E66A63] text-white shadow-lg shadow-pink-200' \n                    : 'bg-slate-100 text-slate-400'\n                }`}\n                data-testid=\"next-btn\"\n              >\n                Next\n                <ArrowRight className=\"w-4 h-4 ml-2\" />\n              </Button>\n            </div>\n          </div>\n        )}\n        \n        {/* Spacer for fixed navigation */}\n        {currentStep < 3 && <div className=\"h-24\"></div>}\n      </main>\n    </div>\n  );\n};\n\nfunction App() {\n  return <ContentCreator />;\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}